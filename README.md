# Test
Стартовый проект для тестового задания в команду Рейтингов и Отзывов ВК.\

Блок обязательных задач (5/6):
- для аватара пользователя добавил соответствующее поле в структуре Review. В качестве изображения использовал картинку из ассетов.
- аналогично для имени и фамилии пользователя добавил соответствующие поля, при конфигурации ячейки "собирал" лейбл для юзернейма из имени и фамилии. Для того, чтобы юзернейм не обрезался, добавил парочку модификаторов, также добавил ограничение с правой стороны, чтобы текст отзыва не вылезал за пределы экрана.
- добавил поле для рейтинга и рендеринг отзыва на основе оценки от пользователя
- после всех отзывов добавил кастомную ячейку с информацией об общем количестве отзывов
- исправил утечки памяти для вью модели отзыва (подробнее ниже)
- переместил дозагрузку отзывов при скролле в фоновый поток, но, кажется, проблема с подмораживанием UI не ушла(

Блок желательных задач (1.5/2)
- постарался в коде придерживаться код-стайла Airbnb
- добавил таргет для кнопки "Показать полностью" 

Memory Leaks:

- `ReviewsViewModel` хранит в `state.items` массив элементов, включая объекты `ReviewItem`
- Каждый `ReviewItem` содержит замыкание `onTapShowMore`, которое ссылается на `ReviewsViewModel`
- Это создает цикл сильных ссылок: `ReviewsViewModel` → `ReviewItem` → замыкание → `ReviewsViewModel`

Solution:

В методе MakeReviewItem() вместо передачи замыкания showMoreReview напрямую, использовал  [weak self]
  

- Для многопоточности использовал GCD

- Основные проблемы с UI-перформансом:
  1. Низкая частота обновлений. Из-за тяжёлых вычислений частота кадров может упасть ниже 60 fps, что может вызвать лаги. Решается чаще всего перемещением тяжёлых вычислительных операций в фоновый поток.
  2. Блокировка главного потока
     Если тяжёлые операции вызываются на главном потоке, который как правило отвечает за обновление UI, интерфейс фризится из-за блокировки главного потока. Решается так же как и в п.1
  3. Неаккуратное использование Data Bindings. Если часто использовать Binding - переменные, на интерфейс может уходить много ненужной работы, что скажется на отображении данных.  
